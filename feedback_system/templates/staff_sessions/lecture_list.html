{% extends 'base_layout.html' %}
{% load i18n %}

{% block title %}
  {% trans "Session History" %}
{% endblock %}

{% block content %}
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <span class="navbar-brand mb-0">{% trans "Lecture Feedback System" %} <small>{% if user.is_authenticated %}<strong><u>User</u>:</strong> {{user.get_full_name}} ({{user.email}}){% endif %}</small></span>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarContent">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item">
            <a class="nav-link btn btn-outline-light mr-1" href="" role="button">New Session</a>
          </li>
          <li class="nav-item">
            <a class="nav-link btn btn-outline-light ml-1" href="{% url 'staff_sessions:logout' %}" role="button">Logout</a>
          </li>
        </ul>
        <!-- <div class="navbar-nav">
          <a class="nav-link mr-1" href="">New Session</a>
          <a class="nav-link ml-1" href="{% url 'staff_sessions:logout' %}">Logout</a>
        </div> -->
        <form class="form-inline my-2 my-lg-0">
          <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
          <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
        </form>
      </div>
    </nav>

    <div class="container-fluid bg-light p-3">
     <div class="row">
       <div class="col-sm">
         {% if lecture_list %}
           <ul class="list-group list-group-flush">
             {% for lecture in lecture_list %}
               <li class="list-group-item container-fluid">
                 <div class="row d-flex justify-content-between">
                   <div class="col-sm-auto d-flex flex-column">
                     <div>
                       <a href="#" class="mr-2 h4">{{ lecture.title }}</a>
                     </div>
                     <div>
                       <span class="h5">{{ lecture.getFirstStartDate }}</span>
                     </div>
                   </div>
                   <div class="col-sm-auto">
                     <a href="{% url 'staff_sessions:lecture_delete' lecture.id %}" type="button" class="btn btn-danger my-2 mx-1">Delete</a>
                   </div>
                 </div>
               </li>
             {% endfor %}
            </ul>
          {% else %}
            <h3><center>There are currently no lecture feedback sessions for the logged in user</center></h3>
          {% endif %}
        </div>
      </div>
      <div class="row d-flex justify-content-center">
        <div class="pagination">
            <span class="step-links">
                {% if lecture_list.has_previous %}
                    <a href="?page=1">&laquo; first</a>
                    <a href="?page={{ lecture_list.previous_page_number }}">previous</a>
                {% endif %}

                <span class="current">
                    Page {{ lecture_list.number }} of {{ lecture_list.paginator.num_pages }}.
                </span>

                {% if lecture_list.has_next %}
                    <a href="?page={{ lecture_list.next_page_number }}">next</a>
                    <a href="?page={{ lecture_list.paginator.num_pages }}">last &raquo;</a>
                {% endif %}
            </span>
        </div>
      </div>
    </div>
{% endblock %}
